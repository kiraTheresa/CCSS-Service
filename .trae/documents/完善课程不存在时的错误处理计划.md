# 完善课程不存在时的错误处理计划

## 1. 问题分析

当前系统中，当课程不存在时，catalog-service已经返回404 NOT_FOUND状态码，但enrollment-service在处理这个响应时，抛出了IllegalArgumentException，导致最终返回400 BAD_REQUEST状态码，不符合用户要求的404 NOT_FOUND状态码。

## 2. 解决方案

1. 创建一个自定义异常类CourseNotFoundException，用于表示课程不存在的情况
2. 修改EnrollmentService，在捕获到HttpClientErrorException.NotFound时，抛出CourseNotFoundException
3. 修改EnrollmentController，捕获CourseNotFoundException并返回404 NOT_FOUND状态码
4. 确保返回的错误格式符合系统的统一格式

## 3. 实施步骤

### 3.1 创建自定义异常类

在enrollment-service中创建CourseNotFoundException类，用于表示课程不存在的情况。

### 3.2 修改EnrollmentService

修改enrollCourse方法，在捕获到HttpClientErrorException.NotFound时，抛出CourseNotFoundException。

### 3.3 修改EnrollmentController

修改enrollCourse方法，捕获CourseNotFoundException并返回404 NOT_FOUND状态码，同时保持统一的错误格式。

## 4. 预期结果

当课程不存在时，catalog-service返回404 NOT_FOUND状态码，enrollment-service收到这个响应后，返回自己的错误格式，但状态码仍保持404 NOT_FOUND。

